# 📌 데이터베이스 프로젝트

<br>

## 📝 프로젝트 목표
- 데이터베이스 성능 향상
- 효율적인 데이터 관리

<br>

## ⏳ 프로젝트 기간
1개월 (2025년 1월 - 2025년 2월)

<br>


---

## 📋 기획서
**데이터베이스에서 발생할 수 있는 문제를 파악하고 해결 방안을 제시**
<br><br>
### 1️⃣ 성능 문제

#### 🔍 문제 상황
- 복잡한 쿼리로 인해 느린 실행 속도
- 테이블 크기 증가로 인한 성능 저하
- 비효율적인 인덱싱으로 인한 쿼리 성능 저하
  <br><br>


#### 💡 해결 방안
- **쿼리 최적화**: 실행 계획 분석 및 개선
- **인덱스 최적화**:
  - 자주 사용되는 컬럼에 **[인덱스](study/Index.md)** 추가
  - 과도한 인덱스 생성을 방지
- **대용량 데이터 처리**:
  - **[Spring Batch](study/SpringBatch.md)** 를 사용하여 특정 시간마다 100만 건의 데이터를 삽입
- **캐싱**:
  - **[Redis](study/Redis.md)** 를 사용하여 조회 요청을 줄임
    <br><br>


### ✅ 테스트 결과
#### 1️⃣ 100만개의 테스트 엔티티 삽입 시도
- 스프링 배치 ❌ (코드로 직접 배치 구현) : OutOfMemory 발생. 시간초과로 모두 롤백되어 삽입 안됨
- 스프링 배치 ⭕️ : 1m 32s 성공
<br>

#### 2️⃣ 인덱스 여부에 따른 조회 성능 비교
총 데이터 500만
- 자주 조회될 것으로 예상되는 컬럼에 단일인덱스를 추가
- 인덱스 ❌ : 1s
- 인덱스 ⭕️ : 0.004s
<br>

#### 3️⃣ 캐싱 여부에 따른 조회 성능 비교
총 데이터 500만
- 레디스 ❌ : 43ms
- 레디스 ⭕️ : 2ms
  <br><br>
---

### 2️⃣ 동시성 문제

#### 🔍 문제 상황
- **데드락(Deadlock)**: 트랜잭션이 서로를 대기하며 중단되는 현상
- **락 경합(Lock Contention)**: 여러 트랜잭션이 동일한 자원을 동시에 요청
- **데이터 정합성 문제**: 동시 업데이트로 인해 데이터 불일치 발생
  <br><br>


#### 💡 해결 방안
- **트랜잭션 격리 수준 조정**:
  - **[READ COMMITTED](study/Isolation.md)**
- **락 타임아웃 설정**:
  - 트랜잭션 대기 시간을 제한하여 데드락 방지
- **낙관적 락과 비관적 락 사용**:
  - 경합 가능성에 따라 적절히 선택
- **큐 기반 처리**:
  - 중요한 작업은 메시지 큐를 통해 순차적으로 처리하여 데이터 일관성을 보장
  - **[RabbitMQ](study/RabbitMQ.md)**
  - **[Kafka](study/Kafka.md)**
    <br><br>
---


### 3️⃣ 확장성 문제 

#### 🔍 문제 상황
- **읽기 성능 문제**: 데이터 요청량 증가로 인해 DB가 병목.
- **쓰기 성능 문제**: 많은 트랜잭션으로 인해 쓰기 병목 발생.
  <br><br>

#### 💡 해결 방안
- **읽기 확장**:
  - **[리드 레플리카(Read Replica)](study/Replication.md)** 설정
- **읽기 확장**:
  - **[샤딩(Sharding)](study/Sharding.md)** 을 통해 테이블을 분리
    <br><br>

---


### 4️⃣ 접속 및 연결 문제
#### 🔍 문제 상황
- **DB 연결 실패**: 커넥션 풀이 가득 차거나 네트워크 문제가 발생.
- **타임아웃 문제**: 연결 시간이 초과되거나 쿼리가 실행되지 않음.
  <br><br>
#### 💡 해결 방법
- **커넥션 풀 관리**:
  - [HikariCP](study/HikariCP.md)와 같은 효율적인 커넥션 풀 사용.
  - 최대 연결 수와 타임아웃 값을 적절히 설정.
    <br><br>
---

### 5️⃣ 트랜잭션 관리 문제
#### 🔍 문제 상황
- **Partial Commit**: 여러 작업 중 일부만 성공하고 나머지는 실패.
- **트랜잭션 경합**: 여러 트랜잭션이 동일한 데이터를 수정하려고 시도.
  <br><br>
#### 💡 해결 방법
- **ACID 트랜잭션**:
   - **[@Transactional](study/Transactional.md)** 을 통해 트랜잭션 범위를 관리
- **트랜잭션 재시도**:
   - 충돌 발생 시 자동 재시도 메커니즘 구현
   - AOP(Aspect-Oriented Programming)을 사용하여 재시도 로직 작성
   - @Transactional 애노테이션을 사용하여 트랜잭션 격리 수준을 설정
     <br><br>
---
### 6️⃣ 보안 문제
#### 🔍 문제 상황
- **SQL Injection** : 입력값을 통해 쿼리가 조작됨.
- **민감 데이터 노출**: 암호화되지 않은 데이터가 유출.
  <br><br>
#### 💡 해결 방법
- **Prepared Statement** :
  - 사용자 입력값을 파라미터로 바인딩.  Jpa 자동으로 해줌
- **민감 데이터 암호화** :
  - **[AES, RSA](study/Encrypt.md)** 와 같은 알고리즘으로 데이터 암호화.
- **접근 제어** :
  - 최소 권한 원칙 적용(예: 읽기 전용 계정).
    <br><br>
---
1️⃣
2️⃣
3️⃣
4️⃣
5️⃣
6️⃣
7️⃣
8️⃣
9️⃣
💡


